# Приложение «Банк»

Микросервисное приложение «Банк» написано с использованием Spring Boot и паттернов микросервисной архитектуры.

Список микросервисов:
- Keycloak (**kecloak**). Для аутентификации сервисов.
- СУБД PostgreSQL (*bank-postgres*) - СУБД содержащая все базы данных приложения
- Сервис аккаунтов (**bank-accounts**) хранит информацию о зарегистрированных аккаунтах и счетах в каждом из них
- Фронт (**bank-front-ui**) - веб-приложение с клиентским HTML-интерфейсом
- Сервис обналичивания денег (**bank-cash**) осуществляет пополнение счёта или снятие денег со счёта
- Сервис перевода денег между счетами (**bank-transfer**) осуществляет перевод денег между счетами одного пользователя и между счетами разных пользователей
- Сервис конвертации валют (**bank-exchange**) хранит информацию о конвертации валюты при её покупке/продаже
- Сервис генерации курсов валют (**bank-exchange-generator**) каждую секунду по расписанию генерирует курсы валют
- Сервис блокировки подозрительных операций (**bank-blocker**) отслеживает подозрительные операции
- Сервис уведомлений (**bank-notifications**) отправляет уведомления на email
- Сервис SMTP Mailhog (**mailhog**) - сервис эмуляции отправки по SMTP email уведомлений

## Использование

На устройстве должен быть установлены и запущены Docker и Kubernetes. Все настройки для keycloak импортируются при создании контейнера.
Все используемые ключи и секретные слова, используемые в проекте, предоставлены для демонстрационных целей и не несут рисков по безопасности.

В целях безопасности рекомендуется сменить ключи, если это того требует.

В папке jenkins нужно создать .env файл
(заполнить его по примеру .env.example). И добавить хосты в /etc/hosts:

```bash
127.0.0.1 bank-app.test.local
127.0.0.1 bank-app.local
```

Интерфейс jenkins будет доступен по адресу:

```
http://localhost:8080
```

CI/CD-процесс должен запуститься автоматически, деплой в prod окружение нужно подтвердить.

Когда все контейнеры запустятся - приложение будет готово к использованию.

Страница регистрации по адресу:
```
http://bank-app.local/signup
```

Основная страница для входа
```
http://bank-app.local
```